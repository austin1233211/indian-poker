# ===========================================
# PIR (Private Information Retrieval) Server Configuration
# ===========================================
# PRODUCTION CHECKLIST:
# [ ] Set NODE_ENV=production
# [ ] Set ENCRYPTION_SECRET (CRITICAL - PIR privacy depends on this!)
# [ ] Set JWT_SECRET (CRITICAL - authentication security!)
# [ ] Configure database path for persistence
# [ ] Review logging for sensitive data
# ===========================================

# Server Port (default: 3000)
PORT=3000

# ===========================================
# Environment Mode (CRITICAL FOR PRODUCTION)
# ===========================================
# Set to 'production' in production environments
NODE_ENV=development

# ===========================================
# Database Configuration
# ===========================================
# Database client (sqlite or pg)
DB_CLIENT=sqlite

# SQLite database path (for sqlite client)
# In production, use a persistent volume
DB_PATH=./data/pir_server.db

# PostgreSQL connection (for pg client)
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=pir_server
# DB_USER=pir_user
# DB_PASSWORD=<secure-password>

# ===========================================
# Encryption Secret (CRITICAL!)
# ===========================================
# Used for encrypting sensitive PIR data
# 
# Generate with:
#   node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
#
# SECURITY BEST PRACTICES:
# - NEVER commit this secret to version control
# - Store in secure secrets manager:
#   * AWS Secrets Manager
#   * HashiCorp Vault
#   * Azure Key Vault
#   * Google Cloud Secret Manager
#   * Railway environment variables (encrypted)
#
# ENCRYPTION_SECRET=<your-32-character-hex-secret>

# ===========================================
# JWT Secret (CRITICAL!)
# ===========================================
# Used for signing authentication tokens
#
# Generate with:
#   node -e "console.log(require('crypto').randomBytes(16).toString('hex'))"
#
# SECURITY BEST PRACTICES:
# - NEVER commit this secret to version control
# - Use a different secret than ENCRYPTION_SECRET
# - Rotate periodically (invalidates existing sessions)
#
# JWT_SECRET=<your-32-character-hex-secret>

# JWT token expiration (default: 24h)
# JWT_EXPIRES_IN=24h

# ===========================================
# Logging Configuration
# ===========================================
# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log format (json for production, pretty for development)
# LOG_FORMAT=json

# ===========================================
# Rate Limiting
# ===========================================
# Maximum requests per minute per IP
# RATE_LIMIT_MAX=100

# Rate limit window in milliseconds
# RATE_LIMIT_WINDOW=60000

# ===========================================
# CORS Configuration
# ===========================================
# Allowed origins for CORS (comma-separated)
# In production, set to your game server's internal URL
# CORS_ORIGINS=http://indian-poker.railway.internal:8080

# ===========================================
# Railway Deployment Configuration
# ===========================================
# Set these environment variables in Railway dashboard:
#
#   NODE_ENV=production
#   PORT=3000
#   DB_CLIENT=sqlite
#   DB_PATH=/app/data/pir_server.db
#   ENCRYPTION_SECRET=<generated-32-char-hex>
#   JWT_SECRET=<generated-32-char-hex>
#
# Ensure /app/data is a persistent volume in Railway

# ===========================================
# Key Rotation Procedure
# ===========================================
# JWT_SECRET rotation:
# 1. Generate new JWT_SECRET
# 2. Deploy with new secret
# 3. All existing sessions will be invalidated
# 4. Users will need to re-authenticate
#
# ENCRYPTION_SECRET rotation:
# 1. This is more complex - requires data migration
# 2. Contact security team before rotating
# 3. May require re-encrypting all stored data
